<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Patient Dashboard | SmartMedicare</title>

<link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

body{
font-family:'Inter',sans-serif;
background:radial-gradient(circle at top left,#0f172a,#020617);
color:#e5e7eb;
margin:0;
overflow-x:hidden;
}

/* Floating background */
body::before,
body::after{
content:"";
position:fixed;
width:500px;
height:500px;
border-radius:50%;
filter:blur(130px);
opacity:.25;
z-index:-1;
animation:float 12s infinite alternate ease-in-out;
}

body::before{
background:#22c55e;
top:-120px;
left:-120px;
}

body::after{
background:#0ea5e9;
bottom:-120px;
right:-120px;
animation-delay:4s;
}

@keyframes float{
from{transform:translateY(0);}
to{transform:translateY(60px);}
}

/* Navbar */
nav{
position:sticky;
top:0;
background:rgba(2,6,23,.9);
backdrop-filter:blur(12px);
z-index:100;
}

/* Glass Card */
.card{
background:rgba(255,255,255,.06);
backdrop-filter:blur(16px);
border-radius:18px;
border:1px solid rgba(255,255,255,.08);
box-shadow:0 20px 50px rgba(0,0,0,.4);
transition:.4s;
animation:fadeUp .7s ease forwards;
opacity:0;
transform:translateY(20px);
}

.card:hover{
transform:translateY(-8px);
box-shadow:0 30px 70px rgba(0,0,0,.6);
}

@keyframes fadeUp{
to{opacity:1;transform:translateY(0);}
}

.label{
font-size:12px;
color:#94a3b8;
}

.value{
font-size:18px;
font-weight:600;
color:#f8fafc;
margin-bottom:12px;
}

/* AI Card */
.ai-card{
background:linear-gradient(135deg,#0ea5e9,#2563eb);
color:white;
position:relative;
overflow:hidden;
}

.ai-badge{
display:inline-block;
padding:4px 10px;
border-radius:20px;
background:#22c55e;
font-weight:600;
margin-top:8px;
}

/* Medicine Progress */
.progress{
background:rgba(255,255,255,.1);
height:8px;
border-radius:20px;
overflow:hidden;
margin-top:5px;
}

.progress-fill{
height:100%;
background:linear-gradient(90deg,#22c55e,#16a34a);
transition:width .5s ease;
}

.low{
background:linear-gradient(90deg,#ff4b2b,#ff416c);
}

/* Small feature cards */
.card.center-align{
cursor:pointer;
}

.card.center-align:hover i{
transform:scale(1.2);
}

.card.center-align i{
transition:.3s;
}

/* Stats Section */
.stats{
display:flex;
gap:30px;
flex-wrap:wrap;
margin-bottom:20px;
}

.stat{
text-align:center;
}

.stat-number{
font-size:24px;
font-weight:700;
color:#22c55e;
}

/* Responsive */
@media(max-width:768px){
h4{font-size:22px;}
}

</style>
</head>

<body>

<!-- NAVBAR -->
<nav>
<div class="nav-wrapper container">
<a href="/" class="brand-logo">ðŸ’Š SmartMedicare</a>

<a href="#" data-target="mobile-menu" class="sidenav-trigger">
<i class="material-icons">menu</i>
</a>

<ul class="right hide-on-med-and-down">
<li><a href="/dashboard">Dashboard</a></li>
<li><a href="/logout">Logout</a></li>
</ul>
</div>
</nav>

<ul class="sidenav" id="mobile-menu">
<li><a href="/dashboard">Dashboard</a></li>
<li><a href="/logout">Logout</a></li>
</ul>

<main>
<div class="container">

<h4>Patient Dashboard</h4>
<p class="grey-text">Your health summary & medication tracking</p>

<!-- Stats -->
<div class="stats">
<div class="stat">
<div class="stat-number"><%= patient.medicines.length %></div>
<p>Total Medicines</p>
</div>
<div class="stat">
<div class="stat-number">92%</div>
<p>Adherence Rate</p>
</div>
<div class="stat">
<div class="stat-number">Low</div>
<p>Risk Level</p>
</div>
</div>

<div class="row">

<div class="col s12 m6">
<div class="card">
<div class="card-content">
<span class="card-title">Profile Information</span>

<p class="label">Name</p>
<p class="value"><%= patient.name %></p>

<p class="label">Patient ID</p>
<p class="value"><%= patient.patientCode %></p>

<p class="label">Phone</p>
<p class="value"><%= patient.phone || 'Not provided' %></p>
</div>
</div>
</div>

<div class="col s12 m6">
<div class="card ai-card">
<div class="card-content">
<span class="card-title">AI Health Insight</span>
<p>Your health status is currently stable.</p>
<span class="ai-badge">Stable</span>
<p style="margin-top:10px;">
Next Dose In: <b id="countdown">03:45:12</b>
</p>
</div>
</div>
</div>

</div>

<!-- Medicines -->
<h5>Your Medicines</h5>

<% if(patient.medicines.length===0){ %>
<p class="grey-text">No medicines assigned yet.</p>
<% } else { %>

<div class="row">
<% patient.medicines.forEach(med=>{ 
let percent = Math.min(100,(med.dosesRemaining/30)*100);
let lowStock = med.dosesRemaining < 5;
%>

<div class="col s12 m6">
<div class="card">
<div class="card-content">

<h6><%= med.name %></h6>
<p>Remaining: <b><%= med.dosesRemaining %></b></p>

<div class="progress">
<div class="progress-fill <%= lowStock ? 'low' : '' %>"
style="width:<%= percent %>%"></div>
</div>

<% if(lowStock){ %>
<p style="color:#ff4b2b;margin-top:6px;">âš  Low Stock</p>
<% } %>

</div>
</div>
</div>

<% }) %>
</div>

<% } %>

<!-- Feature Cards -->
<div class="row">

<div class="col s12 m4">
<div class="card center-align">
<div class="card-content">
<i class="material-icons large green-text">notifications_active</i>
<h6>Reminders</h6>
<p class="grey-text">Medicine alerts</p>
</div>
</div>
</div>

<div class="col s12 m4">
<div class="card center-align">
<div class="card-content">
<i class="material-icons large blue-text">insights</i>
<h6>Health Trends</h6>
<p class="grey-text">AI-based patterns</p>
</div>
</div>
</div>

<div class="col s12 m4">
<div class="card center-align">
<div class="card-content">
<i class="material-icons large orange-text">chat</i>
<h6>AI Assistant</h6>
<p class="grey-text">Ask health questions</p>
</div>
</div>
</div>

</div>

</div>
</main>

<footer>
<div class="container center-align">
<p class="grey-text text-lighten-2">
Â© <%= new Date().getFullYear() %> SmartMedicare
</p>
<p class="grey-text text-lighten-1">
Designed & Developed by <strong>Om Satish Taywade</strong>
</p>
</div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded",()=>{
M.Sidenav.init(document.querySelectorAll(".sidenav"));

document.querySelectorAll(".card").forEach((card,i)=>{
card.style.animationDelay=(i*0.1)+"s";
});
});
</script>

</body>
</html>
